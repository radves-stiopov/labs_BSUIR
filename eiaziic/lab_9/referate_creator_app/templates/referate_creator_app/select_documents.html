<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—ã–±–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚Äî Document Abstractor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #f0f2f5;
            color: #1a1c1e;
        }

        .selection-card {
            background: #ffffff;
            border-radius: 20px;
            border: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.04);
            padding: 2rem;
        }

        .doc-item {
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid #f1f3f5;
            border-radius: 12px;
            margin-bottom: 12px;
            padding: 15px 20px;
            display: flex;
            align-items: center;
        }

        .doc-item:hover {
            border-color: #dee2e6;
            background-color: #f8f9fa;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ */
        .form-check-input:checked + .doc-content-wrapper .doc-item {
            border-color: #6366f1;
            background-color: #f5f6ff;
        }

        .doc-icon {
            width: 45px;
            height: 45px;
            background: #eef2ff;
            color: #6366f1;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.2rem;
        }

        .doc-info {
            flex-grow: 1;
        }

        .doc-title {
            font-weight: 600;
            margin-bottom: 2px;
            display: block;
        }

        .doc-meta {
            font-size: 0.8rem;
            color: #8c949e;
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —á–µ–∫–±–æ–∫—Å —Å–∫—Ä—ã—Ç, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç */
        .hidden-check {
            display: none;
        }

        .btn-process {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            border: none;
            border-radius: 12px;
            padding: 14px;
            font-weight: 700;
            font-size: 1rem;
            color: white;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .btn-process:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
            color: white;
        }

        .empty-state {
            padding: 40px;
            text-align: center;
        }

        .search-bar {
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            padding: 10px 15px;
            margin-bottom: 25px;
        }
    </style>
</head>
<body>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-7 col-md-10">

            <div class="text-center mb-4">
                <h2 class="fw-bold">–í—ã–±–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>
                <p class="text-muted">–û—Ç–º–µ—Ç—å—Ç–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</p>
            </div>

            <form method="post" class="selection-card">
                {% csrf_token %}

                {% if documents %}
                    <input type="text" class="form-control search-bar" id="docSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é...">

                    <div id="docList">
                        {% for doc in documents %}
                            <label class="d-block mb-2" style="cursor: pointer;">
                                <input class="hidden-check form-check-input" type="checkbox" name="documents" value="{{ doc.id }}">
                                <div class="doc-content-wrapper">
                                    <div class="doc-item">
                                        <div class="doc-icon">üìÑ</div>
                                        <div class="doc-info">
                                            <span class="doc-title">{{ doc.title }}</span>
                                            <span class="doc-meta">–ó–∞–≥—Ä—É–∂–µ–Ω: {{ doc.upload_date|date:"d.m.Y H:i" }}</span>
                                        </div>
                                        <div class="check-indicator text-muted">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-check-circle-fill d-none selected-icon" viewBox="0 0 16 16">
                                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </label>
                        {% endfor %}
                    </div>

                    <div class="mt-4">
                        <button type="submit" class="btn btn-process w-100">
                            üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
                        </button>
                    </div>
                {% else %}
                    <div class="empty-state">
                        <div class="fs-1">üìÇ</div>
                        <h5 class="mt-3">–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç</h5>
                        <p class="text-muted">–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</p>
                    </div>
                {% endif %}
            </form>

            <div class="text-center mt-4">
                <a href="/" class="btn btn-link text-decoration-none text-secondary fw-medium">
                    ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
                </a>
            </div>

        </div>
    </div>
</div>

<script>
    // –ü—Ä–æ—Å—Ç–æ–π JavaScript –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∏ –ø–æ–∏—Å–∫–∞
    document.querySelectorAll('.hidden-check').forEach(input => {
        input.addEventListener('change', function() {
            const wrapper = this.nextElementSibling.querySelector('.doc-item');
            const icon = this.nextElementSibling.querySelector('.selected-icon');

            if (this.checked) {
                wrapper.style.borderColor = '#6366f1';
                wrapper.style.backgroundColor = '#f5f6ff';
                icon.classList.remove('d-none');
                icon.style.color = '#6366f1';
            } else {
                wrapper.style.borderColor = '#f1f3f5';
                wrapper.style.backgroundColor = '#ffffff';
                icon.classList.add('d-none');
            }
        });
    });

    // –§–∏–ª—å—Ç—Ä –ø–æ–∏—Å–∫–∞
    const searchInput = document.getElementById('docSearch');
    if (searchInput) {
        searchInput.addEventListener('keyup', function() {
            const filter = this.value.toLowerCase();
            const items = document.querySelectorAll('#docList label');

            items.forEach(item => {
                const text = item.innerText.toLowerCase();
                item.style.display = text.includes(filter) ? '' : 'none';
            });
        });
    }
</script>

</body>
</html>